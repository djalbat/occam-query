'use strict';

var Query = require('../query');

function queryByClass(node, Class) {
  var nodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

  if (node instanceof Class) {
    nodes.push(node);
  }

  var nodeNonTerminalNode = node.isNonTerminalNode();

  if (nodeNonTerminalNode) {
    var childNodes = node.getChildNodes();

    childNodes.forEach(function (childNode) {
      queryByClass(childNode, Class, nodes);
    });
  }

  return nodes;
}

function queryByClasses(node, Classes) {
  var nodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

  Classes.some(function (Class) {
    if (node instanceof Class) {
      nodes.push(node);

      return true;
    }
  });

  var nodeNonTerminalNode = node.isNonTerminalNode();

  if (nodeNonTerminalNode) {
    var childNodes = node.getChildNodes();

    childNodes.forEach(function (childNode) {
      queryByClasses(childNode, Classes, nodes);
    });
  }

  return nodes;
}

function queryByExpression(node, expression) {
  var query = Query.fromExpression(expression),
      nodes = query.execute(node);

  return nodes;
}

module.exports = {
  queryByClass: queryByClass,
  queryByClasses: queryByClasses,
  queryByExpression: queryByExpression
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi91dGlsaXRpZXMvcXVlcnkuanMiXSwibmFtZXMiOlsiUXVlcnkiLCJyZXF1aXJlIiwicXVlcnlCeUNsYXNzIiwibm9kZSIsIkNsYXNzIiwibm9kZXMiLCJwdXNoIiwibm9kZU5vblRlcm1pbmFsTm9kZSIsImlzTm9uVGVybWluYWxOb2RlIiwiY2hpbGROb2RlcyIsImdldENoaWxkTm9kZXMiLCJmb3JFYWNoIiwiY2hpbGROb2RlIiwicXVlcnlCeUNsYXNzZXMiLCJDbGFzc2VzIiwic29tZSIsInF1ZXJ5QnlFeHByZXNzaW9uIiwiZXhwcmVzc2lvbiIsInF1ZXJ5IiwiZnJvbUV4cHJlc3Npb24iLCJleGVjdXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsSUFBTUEsUUFBUUMsUUFBUSxVQUFSLENBQWQ7O0FBRUEsU0FBU0MsWUFBVCxDQUFzQkMsSUFBdEIsRUFBNEJDLEtBQTVCLEVBQStDO0FBQUEsTUFBWkMsS0FBWSx1RUFBSixFQUFJOztBQUM3QyxNQUFJRixnQkFBZ0JDLEtBQXBCLEVBQTJCO0FBQ3pCQyxVQUFNQyxJQUFOLENBQVdILElBQVg7QUFDRDs7QUFFRCxNQUFNSSxzQkFBc0JKLEtBQUtLLGlCQUFMLEVBQTVCOztBQUVBLE1BQUlELG1CQUFKLEVBQXlCO0FBQ3ZCLFFBQU1FLGFBQWFOLEtBQUtPLGFBQUwsRUFBbkI7O0FBRUFELGVBQVdFLE9BQVgsQ0FBbUIsVUFBU0MsU0FBVCxFQUFvQjtBQUNyQ1YsbUJBQWFVLFNBQWIsRUFBd0JSLEtBQXhCLEVBQStCQyxLQUEvQjtBQUNELEtBRkQ7QUFHRDs7QUFFRCxTQUFPQSxLQUFQO0FBQ0Q7O0FBRUQsU0FBU1EsY0FBVCxDQUF3QlYsSUFBeEIsRUFBOEJXLE9BQTlCLEVBQW1EO0FBQUEsTUFBWlQsS0FBWSx1RUFBSixFQUFJOztBQUNqRFMsVUFBUUMsSUFBUixDQUFhLFVBQVNYLEtBQVQsRUFBZ0I7QUFDM0IsUUFBSUQsZ0JBQWdCQyxLQUFwQixFQUEyQjtBQUN6QkMsWUFBTUMsSUFBTixDQUFXSCxJQUFYOztBQUVBLGFBQU8sSUFBUDtBQUNEO0FBQ0YsR0FORDs7QUFRQSxNQUFNSSxzQkFBc0JKLEtBQUtLLGlCQUFMLEVBQTVCOztBQUVBLE1BQUlELG1CQUFKLEVBQXlCO0FBQ3ZCLFFBQU1FLGFBQWFOLEtBQUtPLGFBQUwsRUFBbkI7O0FBRUFELGVBQVdFLE9BQVgsQ0FBbUIsVUFBU0MsU0FBVCxFQUFvQjtBQUNyQ0MscUJBQWVELFNBQWYsRUFBMEJFLE9BQTFCLEVBQW1DVCxLQUFuQztBQUNELEtBRkQ7QUFHRDs7QUFFRCxTQUFPQSxLQUFQO0FBQ0Q7O0FBRUQsU0FBU1csaUJBQVQsQ0FBMkJiLElBQTNCLEVBQWlDYyxVQUFqQyxFQUE2QztBQUMzQyxNQUFNQyxRQUFRbEIsTUFBTW1CLGNBQU4sQ0FBcUJGLFVBQXJCLENBQWQ7QUFBQSxNQUNNWixRQUFRYSxNQUFNRSxPQUFOLENBQWNqQixJQUFkLENBRGQ7O0FBR0EsU0FBT0UsS0FBUDtBQUNEOztBQUVEZ0IsT0FBT0MsT0FBUCxHQUFpQjtBQUNmcEIsNEJBRGU7QUFFZlcsZ0NBRmU7QUFHZkc7QUFIZSxDQUFqQiIsImZpbGUiOiJxdWVyeS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgUXVlcnkgPSByZXF1aXJlKCcuLi9xdWVyeScpO1xuXG5mdW5jdGlvbiBxdWVyeUJ5Q2xhc3Mobm9kZSwgQ2xhc3MsIG5vZGVzID0gW10pIHtcbiAgaWYgKG5vZGUgaW5zdGFuY2VvZiBDbGFzcykge1xuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gIH1cblxuICBjb25zdCBub2RlTm9uVGVybWluYWxOb2RlID0gbm9kZS5pc05vblRlcm1pbmFsTm9kZSgpO1xuXG4gIGlmIChub2RlTm9uVGVybWluYWxOb2RlKSB7XG4gICAgY29uc3QgY2hpbGROb2RlcyA9IG5vZGUuZ2V0Q2hpbGROb2RlcygpO1xuXG4gICAgY2hpbGROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkTm9kZSkge1xuICAgICAgcXVlcnlCeUNsYXNzKGNoaWxkTm9kZSwgQ2xhc3MsIG5vZGVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBub2Rlcztcbn1cblxuZnVuY3Rpb24gcXVlcnlCeUNsYXNzZXMobm9kZSwgQ2xhc3Nlcywgbm9kZXMgPSBbXSkge1xuICBDbGFzc2VzLnNvbWUoZnVuY3Rpb24oQ2xhc3MpIHtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIENsYXNzKSB7XG4gICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG5vZGVOb25UZXJtaW5hbE5vZGUgPSBub2RlLmlzTm9uVGVybWluYWxOb2RlKCk7XG5cbiAgaWYgKG5vZGVOb25UZXJtaW5hbE5vZGUpIHtcbiAgICBjb25zdCBjaGlsZE5vZGVzID0gbm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICBjaGlsZE5vZGVzLmZvckVhY2goZnVuY3Rpb24oY2hpbGROb2RlKSB7XG4gICAgICBxdWVyeUJ5Q2xhc3NlcyhjaGlsZE5vZGUsIENsYXNzZXMsIG5vZGVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBub2Rlcztcbn1cblxuZnVuY3Rpb24gcXVlcnlCeUV4cHJlc3Npb24obm9kZSwgZXhwcmVzc2lvbikge1xuICBjb25zdCBxdWVyeSA9IFF1ZXJ5LmZyb21FeHByZXNzaW9uKGV4cHJlc3Npb24pLFxuICAgICAgICBub2RlcyA9IHF1ZXJ5LmV4ZWN1dGUobm9kZSk7XG5cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcXVlcnlCeUNsYXNzLFxuICBxdWVyeUJ5Q2xhc3NlcyxcbiAgcXVlcnlCeUV4cHJlc3Npb25cbn07XG4iXX0=