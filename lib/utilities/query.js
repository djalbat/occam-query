'use strict';

var Query = require('../query');

function queryByClass(node, Class) {
  var nodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

  if (node instanceof Class) {
    nodes.push(node);
  }

  var nodeNonTerminalNode = node.isNonTerminalNode();

  if (nodeNonTerminalNode) {
    var childNodes = node.getChildNodes();
    childNodes.forEach(function (childNode) {
      queryByClass(childNode, Class, nodes);
    });
  }

  return nodes;
}

function queryByClasses(node, Classes) {
  var nodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
  Classes.some(function (Class) {
    if (node instanceof Class) {
      nodes.push(node);
      return true;
    }
  });
  var nodeNonTerminalNode = node.isNonTerminalNode();

  if (nodeNonTerminalNode) {
    var childNodes = node.getChildNodes();
    childNodes.forEach(function (childNode) {
      queryByClasses(childNode, Classes, nodes);
    });
  }

  return nodes;
}

function queryByExpression(node, expression, maximumDepth) {
  var query = Query.fromExpression(expression, maximumDepth),
      nodes = query.execute(node);
  return nodes;
}

module.exports = {
  queryByClass: queryByClass,
  queryByClasses: queryByClasses,
  queryByExpression: queryByExpression
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInF1ZXJ5LmpzIl0sIm5hbWVzIjpbIlF1ZXJ5IiwicmVxdWlyZSIsInF1ZXJ5QnlDbGFzcyIsIm5vZGUiLCJDbGFzcyIsIm5vZGVzIiwicHVzaCIsIm5vZGVOb25UZXJtaW5hbE5vZGUiLCJpc05vblRlcm1pbmFsTm9kZSIsImNoaWxkTm9kZXMiLCJnZXRDaGlsZE5vZGVzIiwiZm9yRWFjaCIsImNoaWxkTm9kZSIsInF1ZXJ5QnlDbGFzc2VzIiwiQ2xhc3NlcyIsInNvbWUiLCJxdWVyeUJ5RXhwcmVzc2lvbiIsImV4cHJlc3Npb24iLCJtYXhpbXVtRGVwdGgiLCJxdWVyeSIsImZyb21FeHByZXNzaW9uIiwiZXhlY3V0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBckI7O0FBRUEsU0FBU0MsWUFBVCxDQUFzQkMsSUFBdEIsRUFBNEJDLEtBQTVCLEVBQStDO0FBQUEsTUFBWkMsS0FBWSx1RUFBSixFQUFJOztBQUM3QyxNQUFJRixJQUFJLFlBQVlDLEtBQXBCLEVBQTJCO0FBQ3pCQyxJQUFBQSxLQUFLLENBQUNDLElBQU4sQ0FBV0gsSUFBWDtBQUNEOztBQUVELE1BQU1JLG1CQUFtQixHQUFHSixJQUFJLENBQUNLLGlCQUFMLEVBQTVCOztBQUVBLE1BQUlELG1CQUFKLEVBQXlCO0FBQ3ZCLFFBQU1FLFVBQVUsR0FBR04sSUFBSSxDQUFDTyxhQUFMLEVBQW5CO0FBRUFELElBQUFBLFVBQVUsQ0FBQ0UsT0FBWCxDQUFtQixVQUFTQyxTQUFULEVBQW9CO0FBQ3JDVixNQUFBQSxZQUFZLENBQUNVLFNBQUQsRUFBWVIsS0FBWixFQUFtQkMsS0FBbkIsQ0FBWjtBQUNELEtBRkQ7QUFHRDs7QUFFRCxTQUFPQSxLQUFQO0FBQ0Q7O0FBRUQsU0FBU1EsY0FBVCxDQUF3QlYsSUFBeEIsRUFBOEJXLE9BQTlCLEVBQW1EO0FBQUEsTUFBWlQsS0FBWSx1RUFBSixFQUFJO0FBQ2pEUyxFQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYSxVQUFTWCxLQUFULEVBQWdCO0FBQzNCLFFBQUlELElBQUksWUFBWUMsS0FBcEIsRUFBMkI7QUFDekJDLE1BQUFBLEtBQUssQ0FBQ0MsSUFBTixDQUFXSCxJQUFYO0FBRUEsYUFBTyxJQUFQO0FBQ0Q7QUFDRixHQU5EO0FBUUEsTUFBTUksbUJBQW1CLEdBQUdKLElBQUksQ0FBQ0ssaUJBQUwsRUFBNUI7O0FBRUEsTUFBSUQsbUJBQUosRUFBeUI7QUFDdkIsUUFBTUUsVUFBVSxHQUFHTixJQUFJLENBQUNPLGFBQUwsRUFBbkI7QUFFQUQsSUFBQUEsVUFBVSxDQUFDRSxPQUFYLENBQW1CLFVBQVNDLFNBQVQsRUFBb0I7QUFDckNDLE1BQUFBLGNBQWMsQ0FBQ0QsU0FBRCxFQUFZRSxPQUFaLEVBQXFCVCxLQUFyQixDQUFkO0FBQ0QsS0FGRDtBQUdEOztBQUVELFNBQU9BLEtBQVA7QUFDRDs7QUFFRCxTQUFTVyxpQkFBVCxDQUEyQmIsSUFBM0IsRUFBaUNjLFVBQWpDLEVBQTZDQyxZQUE3QyxFQUEyRDtBQUN6RCxNQUFNQyxLQUFLLEdBQUduQixLQUFLLENBQUNvQixjQUFOLENBQXFCSCxVQUFyQixFQUFpQ0MsWUFBakMsQ0FBZDtBQUFBLE1BQ01iLEtBQUssR0FBR2MsS0FBSyxDQUFDRSxPQUFOLENBQWNsQixJQUFkLENBRGQ7QUFHQSxTQUFPRSxLQUFQO0FBQ0Q7O0FBRURpQixNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDZnJCLEVBQUFBLFlBQVksRUFBWkEsWUFEZTtBQUVmVyxFQUFBQSxjQUFjLEVBQWRBLGNBRmU7QUFHZkcsRUFBQUEsaUJBQWlCLEVBQWpCQTtBQUhlLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBRdWVyeSA9IHJlcXVpcmUoJy4uL3F1ZXJ5Jyk7XG5cbmZ1bmN0aW9uIHF1ZXJ5QnlDbGFzcyhub2RlLCBDbGFzcywgbm9kZXMgPSBbXSkge1xuICBpZiAobm9kZSBpbnN0YW5jZW9mIENsYXNzKSB7XG4gICAgbm9kZXMucHVzaChub2RlKTtcbiAgfVxuXG4gIGNvbnN0IG5vZGVOb25UZXJtaW5hbE5vZGUgPSBub2RlLmlzTm9uVGVybWluYWxOb2RlKCk7XG5cbiAgaWYgKG5vZGVOb25UZXJtaW5hbE5vZGUpIHtcbiAgICBjb25zdCBjaGlsZE5vZGVzID0gbm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgICBjaGlsZE5vZGVzLmZvckVhY2goZnVuY3Rpb24oY2hpbGROb2RlKSB7XG4gICAgICBxdWVyeUJ5Q2xhc3MoY2hpbGROb2RlLCBDbGFzcywgbm9kZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG5mdW5jdGlvbiBxdWVyeUJ5Q2xhc3Nlcyhub2RlLCBDbGFzc2VzLCBub2RlcyA9IFtdKSB7XG4gIENsYXNzZXMuc29tZShmdW5jdGlvbihDbGFzcykge1xuICAgIGlmIChub2RlIGluc3RhbmNlb2YgQ2xhc3MpIHtcbiAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgbm9kZU5vblRlcm1pbmFsTm9kZSA9IG5vZGUuaXNOb25UZXJtaW5hbE5vZGUoKTtcblxuICBpZiAobm9kZU5vblRlcm1pbmFsTm9kZSkge1xuICAgIGNvbnN0IGNoaWxkTm9kZXMgPSBub2RlLmdldENoaWxkTm9kZXMoKTtcblxuICAgIGNoaWxkTm9kZXMuZm9yRWFjaChmdW5jdGlvbihjaGlsZE5vZGUpIHtcbiAgICAgIHF1ZXJ5QnlDbGFzc2VzKGNoaWxkTm9kZSwgQ2xhc3Nlcywgbm9kZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG5mdW5jdGlvbiBxdWVyeUJ5RXhwcmVzc2lvbihub2RlLCBleHByZXNzaW9uLCBtYXhpbXVtRGVwdGgpIHtcbiAgY29uc3QgcXVlcnkgPSBRdWVyeS5mcm9tRXhwcmVzc2lvbihleHByZXNzaW9uLCBtYXhpbXVtRGVwdGgpLFxuICAgICAgICBub2RlcyA9IHF1ZXJ5LmV4ZWN1dGUobm9kZSk7XG5cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcXVlcnlCeUNsYXNzLFxuICBxdWVyeUJ5Q2xhc3NlcyxcbiAgcXVlcnlCeUV4cHJlc3Npb25cbn07XG4iXX0=